<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Scooby Snacks Website</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/business-casual.min.css" rel="stylesheet">

  </head>

  <body>

    <h1 class="site-heading text-center text-white d-none d-lg-block">
      <span class="site-heading-upper text-primary mb-3">Scooby Snacks</span>
      <span class="site-heading-lower">The Premier Robotics Team</span>
    </h1>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
      <div class="container">
        <a class="navbar-brand text-uppercase text-expanded font-weight-bold d-lg-none" href="#">Menu</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="about.html">About</a>
            </li>
            <li class="nav-item px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="labs.html">Labs</a>
            </li>
            <li class="nav-item active px-lg-4">
              <a class="nav-link text-uppercase text-expanded" href="milestones.html">Milestones</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="page-section cta">
      <div class="container">
        <div class="row">
          <div class="col-xl-9 mx-auto">
            <div class="cta-inner text-center rounded">
              <h2 class="section-heading mb-5">
                <span class="section-heading-upper">Lab Report 3</span>
              </h2>
              <p> <i>David Pirogovsky, Dylan Neal, Jared Gallina, Larry Tang</i> </p>
              <div id = "content" align = "left">
                <p> <b> <big>Intro:</big></b> </p>
                <p>The first goal of this lab was to integrate several of the components already created into one platform, namely line sensing, detection of a 660 Hz tone, robot avoidance, and wall detection paired with navigation. The additional step needed in this lab was to now integrate radio transmission to relay data about the maze back to a base station to track progress of maze exploration.
                </p>
                <p> <b> <big>Radio Transmission:</big></b> </p>
                <p>We started with some initial tests of the transmitter and receiver to ensure both could communicate with each other.  After downloading the Arduino libraries, we changed the addresses of the transmitter and receiver to 0x000000001aLL and 0x000000001bLL. The Arduinos could not supply enough current to power the transmitter and receiver, so instead they are powered directly off the power supply for testing purposes.  After this, we were able to successfully transmit the timer samples in the initial example sketch. We then developed a scheme to encode the maze information to transmit from the robot to the base station.  This is discussed in the Transmitter section below.  Initial tests for the encoding scheme are performed with simulated robot movements that are then decoded at the base station receiver.  The receiver uses this information to update the GUI. After this, we integrate everything together with the robot and are able to successfully transmit information about robot position and wall locations in the 2 by 3 maze. </p>
               <p> <b> Transmitter:</b> </p>
                <p>Transmitting started with finding a method of encoding the data we would like to send to the receiver. The data we sended ultimately needed 11 bits. The first 5 bits of the data was information on the position data. For the position data the first four most significant bits represented whether the north, east, south, and west walls (in that order) were present at the location. The least significant bit of the position data represented whether the position was unvisited or had treasure. The remaining bits in the transmitted data were the x and y coordinates of the position. Both coordinates require 3 bits, meaning an 8 by 8 grid can be encoded at most. This can easily be adjusted later for larger mazes.
	              Once the three parts of the data (x_coord, y_coord, and pos_data) are defined, they need to be shifted and packed into the transmitted data. This is accomplished in a separate function. X_coord is shifted by 8, y_coord by 5 and pos_data is left in the least significant bits of the data. After the data is packed itâ€™s sent simply by the function radio.write().  This code is integrated into the entire robot code after individual testing with simulated robot movements.
                </p>
                <div align = "middle"><img  src="img/transmit_Code_Snippit.jpg" alt="">
			<p> <small>Data Packaging Code Snippit</small> </p>
		</div>
                <p> <b> Receiver:</b> </p>
                <p>The receiver takes the received data and performs shifts and bit masking to decode the individual x, y coordinates, position data, and wall location. Each of these is needed to create a string that can be pushed to the GUI, which will then update based on the information in the string. To extract the x coordinate we shift the received data by 8 bits to the right, then extract the y coordinate by shifting the data by 8 bits to the right.  In order to determine which walls are present, we use bit masking to first extract the bit representing each wall direction and then shift the appropriate number of bits to the right to use in the conditional. We take all the collected data and concatenate it into a string that is sent to the GUI.  As shown in the final video, this successfully works together with the actual robot transmitting maze information.  </p>
                <div align = "middle"><img  src="receive_Code_Snippit.jpg" alt="">
			<p> <small>GUI Data Processing Code Snippit</small> </p>
		<p> <b> <big>Integrating 660 Hz Tone Detection:</big></b> </p>
               <p></p>
                <p> <b> Updated Wall Detection Algorithm:</b> </p>
                <div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/ameu4O5DWAo?ecver=2" width="640" height="360" frameborder="0" allow="autoplay; encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>
               <p><b> Final System: </b></p>
               <p></p>
                <div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://www.youtube.com/embed/QwtZuilEsTQ?ecver=2" width="640" height="360" frameborder="0" allow="autoplay; encrypted-media" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe></div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <footer class="footer text-faded text-center py-5">
      <div class="container">
        <p class="m-0 small">Copyright &copy; Your Website 2018</p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  </body>

  <!-- Script to highlight the active date in the hours list -->


</html>
